import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { useRef, useState } from 'react';
import { useImageCapture } from '../src';

<Meta title="Web APIs/Image Capture API" />

# Image Capture API

The MediaStream [Image Capture API](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Image_Capture_API) is an API for capturing images or videos from a photographic device. In addition to capturing data, it also allows you to retrieve information about device capabilities such as image size, red-eye reduction and whether or not there is a flash and what they are currently set to. Conversely, the API allows the capabilities to be configured within the constraints what the device allows.

## useImageCapture

```javascript
import { useImageCapture } from '@terenceodonoghue/react-hooks';
```

<Canvas>
  <Story name="useImageCaptureHook">
    {() => {
      const previewRef = useRef();
      const [thumbnails, setThumbnails] = useState([]);
      const takePhoto = useImageCapture({
        onPreviewAvailable: (preview) => {
          if (previewRef.current) {
            previewRef.current.srcObject = preview;
          }
        },
        onPhotoTaken: (url) => {
          setThumbnails([...thumbnails, url]);
        },
      });
      return (
        <div style={{ display: 'flex', gap: 16 }}>
          <button onClick={takePhoto}>Take photo</button>
          <video autoPlay height={200} width={300} ref={previewRef} />
          {thumbnails.map((thumbnail) => (
            <img key={thumbnail} src={thumbnail} height={100} width={150} />
          ))}
        </div>
      );
    }}
  </Story>
</Canvas>
